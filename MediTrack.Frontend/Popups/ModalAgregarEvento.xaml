<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MediTrack.Frontend.Vistas.PantallasPrincipales.ModalAgregarEvento"
             BackgroundColor="Transparent"
             Title="">

    <!-- Fondo semi-transparente -->
    <Grid BackgroundColor="#80000000">
        <Grid.GestureRecognizers>
            <TapGestureRecognizer Tapped="OnFondoTapped" />
        </Grid.GestureRecognizers>

        <!-- Modal flotante centrado -->
        <Frame BackgroundColor="White"
               CornerRadius="20"
               HasShadow="True"
               Margin="30"
               Padding="0"
               VerticalOptions="Center"
               HorizontalOptions="Fill"
               MaximumHeightRequest="500">

            <ScrollView>
                <VerticalStackLayout Spacing="0">

                    <!-- Header compacto -->
                    <Frame BackgroundColor="#007AFF" 
                           CornerRadius="20" 
                           Padding="20,15"
                           Margin="0"
                           HasShadow="False">
                        <VerticalStackLayout Spacing="3">
                            <HorizontalStackLayout Spacing="8" HorizontalOptions="Center">
                                <Label FontFamily="MaterialIcons"
                                       Text="&#xe145;"
                                       FontSize="20"
                                       TextColor="White"
                                       VerticalOptions="Center" />
                                <Label Text="Nuevo Evento"
                                       FontSize="18"
                                       FontAttributes="Bold"
                                       TextColor="White"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>
                            <Label x:Name="LabelFecha"
                                   FontSize="13"
                                   TextColor="White"
                                   HorizontalTextAlignment="Center"
                                   Opacity="0.9" />
                        </VerticalStackLayout>
                    </Frame>

                    <!-- Contenido compacto -->
                    <VerticalStackLayout Spacing="15" Padding="20">

                        <!-- Campo: Nombre del evento -->
                        <VerticalStackLayout Spacing="5">
                            <HorizontalStackLayout Spacing="8">
                                <Label FontFamily="MaterialIcons"
                                       Text="&#xe3c9;"
                                       FontSize="16"
                                       TextColor="#007AFF"
                                       VerticalOptions="Center" />
                                <Label Text="Nombre"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#333"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>
                            <Frame BackgroundColor="#F8F9FA" 
                                   CornerRadius="10" 
                                   Padding="12"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Entry x:Name="EntryNombre"
                                       Placeholder="Ej: Tomar medicamento..."
                                       FontSize="14"
                                       BackgroundColor="Transparent"
                                       PlaceholderColor="#999"
                                       TextColor="#333" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Campos en fila: Hora y Tipo -->
                        <Grid ColumnDefinitions="*,10,*" RowSpacing="5">

                            <!-- Horario -->
                            <VerticalStackLayout Grid.Column="0" Spacing="5">
                                <HorizontalStackLayout Spacing="8">
                                    <Label FontFamily="MaterialIcons"
                                           Text="&#xe8b5;"
                                           FontSize="16"
                                           TextColor="#007AFF"
                                           VerticalOptions="Center" />
                                    <Label Text="Hora"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#333"
                                           VerticalOptions="Center" />
                                </HorizontalStackLayout>
                                <Frame BackgroundColor="#F8F9FA" 
                                       CornerRadius="10" 
                                       Padding="12"
                                       HasShadow="False"
                                       BorderColor="Transparent">
                                    <TimePicker x:Name="TimePickerHora"
                                               FontSize="14"
                                               BackgroundColor="Transparent"
                                               TextColor="#333"
                                               Time="12:00:00" />
                                </Frame>
                            </VerticalStackLayout>

                            <!-- Tipo -->
                            <VerticalStackLayout Grid.Column="2" Spacing="5">
                                <HorizontalStackLayout Spacing="8">
                                    <Label FontFamily="MaterialIcons"
                                           Text="&#xe892;"
                                           FontSize="16"
                                           TextColor="#007AFF"
                                           VerticalOptions="Center" />
                                    <Label Text="Tipo"
                                           FontSize="14"
                                           FontAttributes="Bold"
                                           TextColor="#333"
                                           VerticalOptions="Center" />
                                </HorizontalStackLayout>
                                <Frame BackgroundColor="#F8F9FA" 
                                       CornerRadius="10" 
                                       Padding="0"
                                       HasShadow="False"
                                       BorderColor="Transparent">
                                    <Grid ColumnDefinitions="*,Auto" Padding="12,0">
                                        <Picker x:Name="PickerTipo"
                                               Grid.Column="0"
                                               FontSize="14"
                                               BackgroundColor="Transparent"
                                               TextColor="#333"
                                               VerticalOptions="Center"
                                               SelectedIndex="0">
                                            <Picker.Items>
                                                <x:String>Medicamento</x:String>
                                                <x:String>Cita médica</x:String>
                                                <x:String>Análisis</x:String>
                                                <x:String>Recordatorio</x:String>
                                                <x:String>Ejercicio</x:String>
                                                <x:String>Otro</x:String>
                                            </Picker.Items>
                                        </Picker>
                                        <Label Grid.Column="1"
                                               FontFamily="MaterialIcons"
                                               Text="&#xe5c5;"
                                               FontSize="16"
                                               TextColor="#999"
                                               VerticalOptions="Center"
                                               Margin="0,0,8,0" />
                                    </Grid>
                                </Frame>
                            </VerticalStackLayout>
                        </Grid>

                        <!-- Campo: Descripción (opcional y más pequeño) -->
                        <VerticalStackLayout Spacing="5">
                            <HorizontalStackLayout Spacing="8">
                                <Label FontFamily="MaterialIcons"
                                       Text="&#xe865;"
                                       FontSize="16"
                                       TextColor="#007AFF"
                                       VerticalOptions="Center" />
                                <Label Text="Descripción (opcional)"
                                       FontSize="14"
                                       FontAttributes="Bold"
                                       TextColor="#333"
                                       VerticalOptions="Center" />
                            </HorizontalStackLayout>
                            <Frame BackgroundColor="#F8F9FA" 
                                   CornerRadius="10" 
                                   Padding="12"
                                   HasShadow="False"
                                   BorderColor="Transparent">
                                <Editor x:Name="EditorDescripcion"
                                       Placeholder="Detalles adicionales..."
                                       FontSize="14"
                                       BackgroundColor="Transparent"
                                       PlaceholderColor="#999"
                                       TextColor="#333"
                                       HeightRequest="60" />
                            </Frame>
                        </VerticalStackLayout>

                        <!-- Botones compactos -->
                        <Grid ColumnDefinitions="*,10,*" Margin="0,10,0,0">

                            <!-- Botón Cancelar -->
                            <Button Grid.Column="0"
                                    Text="Cancelar"
                                    BackgroundColor="#E5E7EB"
                                    TextColor="#6B7280"
                                    CornerRadius="12"
                                    FontSize="14"
                                    FontAttributes="Bold"
                                    HeightRequest="44"
                                    Clicked="OnCancelarClicked" />

                            <!-- Botón Guardar -->
                            <Button Grid.Column="2"
                                    Text="Guardar"
                                    BackgroundColor="#007AFF"
                                    TextColor="White"
                                    CornerRadius="12"
                                    FontSize="14"
                                    FontAttributes="Bold"
                                    HeightRequest="44"
                                    Clicked="OnGuardarClicked" />

                        </Grid>

                    </VerticalStackLayout>
                </VerticalStackLayout>
            </ScrollView>
        </Frame>
    </Grid>

</ContentPage>